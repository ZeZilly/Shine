var qi=Object.defineProperty;var Qi=(t,e,n)=>e in t?qi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var s=(t,e,n)=>Qi(t,typeof e!="symbol"?e+"":e,n);import{z as S,o as Ei,q as Ui,t as $i,j as d,S as se,F as Oi,x as L,y as M,A as q,B as Q,I as W,D as E,E as Gi,G as Xi,H as Ki}from"./index-pkZhddLw.js";import{T as Ri}from"./textarea-DqesEHUN.js";const i=Symbol.for("drizzle:entityKind");function x(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,i))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(t).constructor;if(n)for(;n;){if(i in n&&n[i]===e[i])return!0;n=Object.getPrototypeOf(n)}return!1}var ge;ge=i;class A{constructor(e,n){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(A,ge,"Column");var de;de=i;class Wr{constructor(e,n,r){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(Wr,de,"ColumnBuilder");const F=Symbol.for("drizzle:Name");var pe;pe=i;class Hr{constructor(e,n){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:a,foreignColumns:o}=e();return{name:r,columns:a,foreignTable:o[0].table,foreignColumns:o}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Yr(e,this)}}s(Hr,pe,"PgForeignKeyBuilder");var fe;fe=i;class Yr{constructor(e,n){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:e,columns:n,foreignColumns:r}=this.reference(),a=n.map(p=>p.name),o=r.map(p=>p.name),l=[this.table[F],...a,r[0].table[F],...o];return e??`${l.join("_")}_fk`}}s(Yr,fe,"PgForeignKey");function Ji(t,...e){return t(...e)}function Wi(t,e){return`${t[F]}_${e.join("_")}_unique`}function ie(t,e,n){for(let r=e;r<t.length;r++){const a=t[r];if(a==="\\"){r++;continue}if(a==='"')return[t.slice(e,r).replace(/\\/g,""),r+1];if(!n&&(a===","||a==="}"))return[t.slice(e,r).replace(/\\/g,""),r]}return[t.slice(e).replace(/\\/g,""),t.length]}function Zr(t,e=0){const n=[];let r=e,a=!1;for(;r<t.length;){const o=t[r];if(o===","){(a||r===e)&&n.push(""),a=!0,r++;continue}if(a=!1,o==="\\"){r+=2;continue}if(o==='"'){const[g,h]=ie(t,r+1,!0);n.push(g),r=h;continue}if(o==="}")return[n,r+1];if(o==="{"){const[g,h]=Zr(t,r+1);n.push(g),r=h;continue}const[l,p]=ie(t,r,!1);n.push(l),r=p}return[n,r]}function Hi(t){const[e]=Zr(t,1);return e}function kr(t){return`{${t.map(e=>Array.isArray(e)?kr(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var he,ye;class m extends(ye=Wr,he=i,ye){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(n){return new ts(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:a,actions:o})=>Ji((l,p)=>{const g=new Hr(()=>{const h=l();return{columns:[n],foreignColumns:[h]}});return p.onUpdate&&g.onUpdate(p.onUpdate),p.onDelete&&g.onDelete(p.onDelete),g.build(r)},a,o))}buildExtraConfigColumn(n){return new es(n,this.config)}}s(m,he,"PgColumnBuilder");var be,Se;class c extends(Se=A,be=i,Se){constructor(e,n){n.uniqueName||(n.uniqueName=Wi(e,[n.name])),super(e,n),this.table=e}}s(c,be,"PgColumn");var Te,Ne;class es extends(Ne=c,Te=i,Ne){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}s(es,Te,"ExtraConfigColumn");var Pe,xe;class ts extends(xe=m,Pe=i,xe){constructor(e,n,r){super(e,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(e){const n=this.config.baseBuilder.build(e);return new k(e,this.config,n)}}s(ts,Pe,"PgArrayBuilder");var we,Ie;const K=class K extends(Ie=c,we=i,Ie){constructor(n,r,a,o){super(n,r);s(this,"size");this.baseColumn=a,this.range=o,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=Hi(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const a=n.map(o=>o===null?null:x(this.baseColumn,K)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return r?a:kr(a)}};s(K,we,"PgArray");let k=K;const ae=Symbol.for("drizzle:isPgEnum");function Yi(t){return!!t&&typeof t=="function"&&ae in t&&t[ae]===!0}var De;De=i;class te{constructor(e,n,r,a=!1){this._={brand:"Subquery",sql:e,selectedFields:n,alias:r,isWith:a}}}s(te,De,"Subquery");const Zi={startActiveSpan(t,e){return e()}},V=Symbol.for("drizzle:ViewBaseConfig"),H=Symbol.for("drizzle:Schema"),oe=Symbol.for("drizzle:Columns"),ue=Symbol.for("drizzle:ExtraConfigColumns"),Y=Symbol.for("drizzle:OriginalName"),Z=Symbol.for("drizzle:BaseName"),U=Symbol.for("drizzle:IsAlias"),le=Symbol.for("drizzle:ExtraConfigBuilder"),ns=Symbol.for("drizzle:IsDrizzleTable");var Ce,Be,Fe,Ve,Ae,_e,ze,ve,je,Le;Le=i,je=F,ve=Y,ze=H,_e=oe,Ae=ue,Ve=Z,Fe=U,Be=ns,Ce=le;class w{constructor(e,n,r){s(this,je);s(this,ve);s(this,ze);s(this,_e);s(this,Ae);s(this,Ve);s(this,Fe,!1);s(this,Be,!0);s(this,Ce);this[F]=this[Y]=e,this[H]=n,this[Z]=r}}s(w,Le,"Table"),s(w,"Symbol",{Name:F,Schema:H,OriginalName:Y,Columns:oe,ExtraConfigColumns:ue,BaseName:Z,IsAlias:U,ExtraConfigBuilder:le});function rs(t){return typeof t=="object"&&t!==null&&ns in t}function ki(t){return t!=null&&typeof t.getSQL=="function"}function ea(t){var n;const e={sql:"",params:[]};for(const r of t)e.sql+=r.sql,e.params.push(...r.params),(n=r.typings)!=null&&n.length&&(e.typings||(e.typings=[]),e.typings.push(...r.typings));return e}var Me;Me=i;class D{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new T([this])}}s(D,Me,"StringChunk");var qe;qe=i;const B=class B{constructor(e){s(this,"decoder",ss);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Zi.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,e);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(e,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:l,prepareTyping:p,inlineParams:g,paramStartIndex:h}=r;return ea(e.map(u=>{var C;if(x(u,D))return{sql:u.value.join(""),params:[]};if(x(u,$))return{sql:o(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const f=[new D("(")];for(const[N,Mi]of u.entries())f.push(Mi),N<u.length-1&&f.push(new D(", "));return f.push(new D(")")),this.buildQueryFromSourceParams(f,r)}if(x(u,B))return this.buildQueryFromSourceParams(u.queryChunks,{...r,inlineParams:g||u.shouldInlineParams});if(x(u,w)){const f=u[w.Symbol.Schema],N=u[w.Symbol.Name];return{sql:f===void 0||u[U]?o(N):o(f)+"."+o(N),params:[]}}if(x(u,A)){const f=a.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:o(f),params:[]};const N=u.table[w.Symbol.Schema];return{sql:u.table[U]||N===void 0?o(u.table[w.Symbol.Name])+"."+o(f):o(N)+"."+o(u.table[w.Symbol.Name])+"."+o(f),params:[]}}if(x(u,os)){const f=u[V].schema,N=u[V].name;return{sql:f===void 0||u[V].isAlias?o(N):o(f)+"."+o(N),params:[]}}if(x(u,ne)){if(x(u.value,G))return{sql:l(h.value++,u),params:[u],typings:["none"]};const f=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(x(f,B))return this.buildQueryFromSourceParams([f],r);if(g)return{sql:this.mapInlineParam(f,r),params:[]};let N=["none"];return p&&(N=[p(u.encoder)]),{sql:l(h.value++,f),params:[f],typings:N}}return x(u,G)?{sql:l(h.value++,u),params:[u],typings:["none"]}:x(u,B.Aliased)&&u.fieldAlias!==void 0?{sql:o(u.fieldAlias),params:[]}:x(u,te)?u._.isWith?{sql:o(u._.alias),params:[]}:this.buildQueryFromSourceParams([new D("("),u._.sql,new D(") "),new $(u._.alias)],r):Yi(u)?u.schema?{sql:o(u.schema)+"."+o(u.enumName),params:[]}:{sql:o(u.enumName),params:[]}:ki(u)?(C=u.shouldOmitSQLParens)!=null&&C.call(u)?this.buildQueryFromSourceParams([u.getSQL()],r):this.buildQueryFromSourceParams([new D("("),u.getSQL(),new D(")")],r):g?{sql:this.mapInlineParam(u,r),params:[]}:{sql:l(h.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:n}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return n(e);if(typeof e=="object"){const r=e.toString();return n(r==="[object Object]"?JSON.stringify(e):r)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new B.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(B,qe,"SQL");let T=B;var Qe;Qe=i;class ${constructor(e){s(this,"brand");this.value=e}getSQL(){return new T([this])}}s($,Qe,"Name");const ss={mapFromDriverValue:t=>t},is={mapToDriverValue:t=>t};({...ss,...is});var Ee;Ee=i;class ne{constructor(e,n=is){s(this,"brand");this.value=e,this.encoder=n}getSQL(){return new T([this])}}s(ne,Ee,"Param");function O(t,...e){const n=[];(e.length>0||t.length>0&&t[0]!=="")&&n.push(new D(t[0]));for(const[r,a]of e.entries())n.push(a,new D(t[r+1]));return new T(n)}(t=>{function e(){return new T([])}t.empty=e;function n(g){return new T(g)}t.fromList=n;function r(g){return new T([new D(g)])}t.raw=r;function a(g,h){const u=[];for(const[C,f]of g.entries())C>0&&h!==void 0&&u.push(h),u.push(f);return new T(u)}t.join=a;function o(g){return new $(g)}t.identifier=o;function l(g){return new G(g)}t.placeholder=l;function p(g,h){return new ne(g,h)}t.param=p})(O||(O={}));(t=>{var n;n=i;const r=class r{constructor(o,l){s(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};s(r,n,"SQL.Aliased");let e=r;t.Aliased=e})(T||(T={}));var Ue;Ue=i;class G{constructor(e){this.name=e}getSQL(){return new T([this])}}s(G,Ue,"Placeholder");const as=Symbol.for("drizzle:IsDrizzleView");var $e,Oe,Ge;Ge=i,Oe=V,$e=as;class os{constructor({name:e,schema:n,selectedFields:r,query:a}){s(this,Oe);s(this,$e,!0);this[V]={name:e,originalName:e,schema:n,selectedFields:r,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new T([this])}}s(os,Ge,"View");function ta(t){return typeof t=="object"&&t!==null&&as in t}A.prototype.getSQL=function(){return new T([this])};w.prototype.getSQL=function(){return new T([this])};te.prototype.getSQL=function(){return new T([this])};function na(t){return t[w.Symbol.Columns]}function ra(t){return t[V].selectedFields}function P(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Xe,Ke;class j extends(Ke=m,Xe=i,Ke){generatedAlwaysAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:n,...r}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(j,Xe,"PgIntColumnBaseBuilder");var Re,Je;class us extends(Je=j,Re=i,Je){constructor(e){super(e,"number","PgBigInt53")}build(e){return new ls(e,this.config)}}s(us,Re,"PgBigInt53Builder");var We,He;class ls extends(He=c,We=i,He){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(ls,We,"PgBigInt53");var Ye,Ze;class cs extends(Ze=j,Ye=i,Ze){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ms(e,this.config)}}s(cs,Ye,"PgBigInt64Builder");var ke,et;class ms extends(et=c,ke=i,et){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(ms,ke,"PgBigInt64");function sa(t,e){const{name:n,config:r}=P(t,e);return r.mode==="number"?new us(n):new cs(n)}var tt,nt;class gs extends(nt=m,tt=i,nt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ds(e,this.config)}}s(gs,tt,"PgBigSerial53Builder");var rt,st;class ds extends(st=c,rt=i,st){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(ds,rt,"PgBigSerial53");var it,at;class ps extends(at=m,it=i,at){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new fs(e,this.config)}}s(ps,it,"PgBigSerial64Builder");var ot,ut;class fs extends(ut=c,ot=i,ut){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(fs,ot,"PgBigSerial64");function ia(t,e){const{name:n,config:r}=P(t,e);return r.mode==="number"?new gs(n):new ps(n)}var lt,ct;class hs extends(ct=m,lt=i,ct){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new ys(e,this.config)}}s(hs,lt,"PgBooleanBuilder");var mt,gt;class ys extends(gt=c,mt=i,gt){getSQLType(){return"boolean"}}s(ys,mt,"PgBoolean");function aa(t){return new hs(t??"")}var dt,pt;class bs extends(pt=m,dt=i,pt){constructor(e,n){super(e,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new Ss(e,this.config)}}s(bs,dt,"PgCharBuilder");var ft,ht;class Ss extends(ht=c,ft=i,ht){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(Ss,ft,"PgChar");function oa(t,e={}){const{name:n,config:r}=P(t,e);return new bs(n,r)}var yt,bt;class Ts extends(bt=m,yt=i,bt){constructor(e){super(e,"string","PgCidr")}build(e){return new Ns(e,this.config)}}s(Ts,yt,"PgCidrBuilder");var St,Tt;class Ns extends(Tt=c,St=i,Tt){getSQLType(){return"cidr"}}s(Ns,St,"PgCidr");function ua(t){return new Ts(t??"")}var Nt,Pt;class Ps extends(Pt=m,Nt=i,Pt){constructor(e,n,r){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(e){return new xs(e,this.config)}}s(Ps,Nt,"PgCustomColumnBuilder");var xt,wt;class xs extends(wt=c,xt=i,wt){constructor(n,r){super(n,r);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}s(xs,xt,"PgCustomColumn");function la(t){return(e,n)=>{const{name:r,config:a}=P(e,n);return new Ps(r,a,t)}}var It,Dt;class z extends(Dt=m,It=i,Dt){defaultNow(){return this.default(O`now()`)}}s(z,It,"PgDateColumnBaseBuilder");var Ct,Bt;class ws extends(Bt=z,Ct=i,Bt){constructor(e){super(e,"date","PgDate")}build(e){return new Is(e,this.config)}}s(ws,Ct,"PgDateBuilder");var Ft,Vt;class Is extends(Vt=c,Ft=i,Vt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Is,Ft,"PgDate");var At,_t;class Ds extends(_t=z,At=i,_t){constructor(e){super(e,"string","PgDateString")}build(e){return new Cs(e,this.config)}}s(Ds,At,"PgDateStringBuilder");var zt,vt;class Cs extends(vt=c,zt=i,vt){getSQLType(){return"date"}}s(Cs,zt,"PgDateString");function ca(t,e){const{name:n,config:r}=P(t,e);return(r==null?void 0:r.mode)==="date"?new ws(n):new Ds(n)}var jt,Lt;class Bs extends(Lt=m,jt=i,Lt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Fs(e,this.config)}}s(Bs,jt,"PgDoublePrecisionBuilder");var Mt,qt;class Fs extends(qt=c,Mt=i,qt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Fs,Mt,"PgDoublePrecision");function ma(t){return new Bs(t??"")}var Qt,Et;class Vs extends(Et=m,Qt=i,Et){constructor(e){super(e,"string","PgInet")}build(e){return new As(e,this.config)}}s(Vs,Qt,"PgInetBuilder");var Ut,$t;class As extends($t=c,Ut=i,$t){getSQLType(){return"inet"}}s(As,Ut,"PgInet");function ga(t){return new Vs(t??"")}var Ot,Gt;class _s extends(Gt=j,Ot=i,Gt){constructor(e){super(e,"number","PgInteger")}build(e){return new zs(e,this.config)}}s(_s,Ot,"PgIntegerBuilder");var Xt,Kt;class zs extends(Kt=c,Xt=i,Kt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(zs,Xt,"PgInteger");function da(t){return new _s(t??"")}var Rt,Jt;class vs extends(Jt=m,Rt=i,Jt){constructor(e,n){super(e,"string","PgInterval"),this.config.intervalConfig=n}build(e){return new js(e,this.config)}}s(vs,Rt,"PgIntervalBuilder");var Wt,Ht;class js extends(Ht=c,Wt=i,Ht){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}s(js,Wt,"PgInterval");function pa(t,e={}){const{name:n,config:r}=P(t,e);return new vs(n,r)}var Yt,Zt;class Ls extends(Zt=m,Yt=i,Zt){constructor(e){super(e,"json","PgJson")}build(e){return new Ms(e,this.config)}}s(Ls,Yt,"PgJsonBuilder");var kt,en;class Ms extends(en=c,kt=i,en){constructor(e,n){super(e,n)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Ms,kt,"PgJson");function fa(t){return new Ls(t??"")}var tn,nn;class qs extends(nn=m,tn=i,nn){constructor(e){super(e,"json","PgJsonb")}build(e){return new Qs(e,this.config)}}s(qs,tn,"PgJsonbBuilder");var rn,sn;class Qs extends(sn=c,rn=i,sn){constructor(e,n){super(e,n)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Qs,rn,"PgJsonb");function ha(t){return new qs(t??"")}var an,on;class Es extends(on=m,an=i,on){constructor(e){super(e,"array","PgLine")}build(e){return new Us(e,this.config)}}s(Es,an,"PgLineBuilder");var un,ln;class Us extends(ln=c,un=i,ln){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(Us,un,"PgLine");var cn,mn;class $s extends(mn=m,cn=i,mn){constructor(e){super(e,"json","PgLineABC")}build(e){return new Os(e,this.config)}}s($s,cn,"PgLineABCBuilder");var gn,dn;class Os extends(dn=c,gn=i,dn){getSQLType(){return"line"}mapFromDriverValue(e){const[n,r,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(Os,gn,"PgLineABC");function ya(t,e){const{name:n,config:r}=P(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Es(n):new $s(n)}var pn,fn;class Gs extends(fn=m,pn=i,fn){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Xs(e,this.config)}}s(Gs,pn,"PgMacaddrBuilder");var hn,yn;class Xs extends(yn=c,hn=i,yn){getSQLType(){return"macaddr"}}s(Xs,hn,"PgMacaddr");function ba(t){return new Gs(t??"")}var bn,Sn;class Ks extends(Sn=m,bn=i,Sn){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Rs(e,this.config)}}s(Ks,bn,"PgMacaddr8Builder");var Tn,Nn;class Rs extends(Nn=c,Tn=i,Nn){getSQLType(){return"macaddr8"}}s(Rs,Tn,"PgMacaddr8");function Sa(t){return new Ks(t??"")}var Pn,xn;class Js extends(xn=m,Pn=i,xn){constructor(e,n,r){super(e,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(e){return new Ws(e,this.config)}}s(Js,Pn,"PgNumericBuilder");var wn,In;class Ws extends(In=c,wn=i,In){constructor(n,r){super(n,r);s(this,"precision");s(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(Ws,wn,"PgNumeric");function Ta(t,e){const{name:n,config:r}=P(t,e);return new Js(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}var Dn,Cn;class Hs extends(Cn=m,Dn=i,Cn){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Ys(e,this.config)}}s(Hs,Dn,"PgPointTupleBuilder");var Bn,Fn;class Ys extends(Fn=c,Bn=i,Fn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(Ys,Bn,"PgPointTuple");var Vn,An;class Zs extends(An=m,Vn=i,An){constructor(e){super(e,"json","PgPointObject")}build(e){return new ks(e,this.config)}}s(Zs,Vn,"PgPointObjectBuilder");var _n,zn;class ks extends(zn=c,_n=i,zn){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[n,r]=e.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(ks,_n,"PgPointObject");function Na(t,e){const{name:n,config:r}=P(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new Hs(n):new Zs(n)}function Pa(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(Number.parseInt(t.slice(n,n+2),16));return new Uint8Array(e)}function ce(t,e){const n=new ArrayBuffer(8),r=new DataView(n);for(let a=0;a<8;a++)r.setUint8(a,t[e+a]);return r.getFloat64(0,!0)}function ei(t){const e=Pa(t);let n=0;const r=e[n];n+=1;const a=new DataView(e.buffer),o=a.getUint32(n,r===1);if(n+=4,o&536870912&&(a.getUint32(n,r===1),n+=4),(o&65535)===1){const l=ce(e,n);n+=8;const p=ce(e,n);return n+=8,[l,p]}throw new Error("Unsupported geometry type")}var vn,jn;class ti extends(jn=m,vn=i,jn){constructor(e){super(e,"array","PgGeometry")}build(e){return new ni(e,this.config)}}s(ti,vn,"PgGeometryBuilder");var Ln,Mn;class ni extends(Mn=c,Ln=i,Mn){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ei(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(ni,Ln,"PgGeometry");var qn,Qn;class ri extends(Qn=m,qn=i,Qn){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new si(e,this.config)}}s(ri,qn,"PgGeometryObjectBuilder");var En,Un;class si extends(Un=c,En=i,Un){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const n=ei(e);return{x:n[0],y:n[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(si,En,"PgGeometryObject");function xa(t,e){const{name:n,config:r}=P(t,e);return!(r!=null&&r.mode)||r.mode==="tuple"?new ti(n):new ri(n)}var $n,On;class ii extends(On=m,$n=i,On){constructor(e,n){super(e,"number","PgReal"),this.config.length=n}build(e){return new ai(e,this.config)}}s(ii,$n,"PgRealBuilder");var Gn,Xn;class ai extends(Xn=c,Gn=i,Xn){constructor(n,r){super(n,r);s(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}s(ai,Gn,"PgReal");function wa(t){return new ii(t??"")}var Kn,Rn;class oi extends(Rn=m,Kn=i,Rn){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ui(e,this.config)}}s(oi,Kn,"PgSerialBuilder");var Jn,Wn;class ui extends(Wn=c,Jn=i,Wn){getSQLType(){return"serial"}}s(ui,Jn,"PgSerial");function _(t){return new oi(t??"")}var Hn,Yn;class li extends(Yn=j,Hn=i,Yn){constructor(e){super(e,"number","PgSmallInt")}build(e){return new ci(e,this.config)}}s(li,Hn,"PgSmallIntBuilder");var Zn,kn;class ci extends(kn=c,Zn=i,kn){constructor(){super(...arguments);s(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}s(ci,Zn,"PgSmallInt");function Ia(t){return new li(t??"")}var er,tr;class mi extends(tr=m,er=i,tr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new gi(e,this.config)}}s(mi,er,"PgSmallSerialBuilder");var nr,rr;class gi extends(rr=c,nr=i,rr){getSQLType(){return"smallserial"}}s(gi,nr,"PgSmallSerial");function Da(t){return new mi(t??"")}var sr,ir;class di extends(ir=m,sr=i,ir){constructor(e,n){super(e,"string","PgText"),this.config.enumValues=n.enum}build(e){return new pi(e,this.config)}}s(di,sr,"PgTextBuilder");var ar,or;class pi extends(or=c,ar=i,or){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(pi,ar,"PgText");function re(t,e={}){const{name:n,config:r}=P(t,e);return new di(n,r)}var ur,lr;class fi extends(lr=z,ur=i,lr){constructor(e,n,r){super(e,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(e){return new hi(e,this.config)}}s(fi,ur,"PgTimeBuilder");var cr,mr;class hi extends(mr=c,cr=i,mr){constructor(n,r){super(n,r);s(this,"withTimezone");s(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(hi,cr,"PgTime");function Ca(t,e={}){const{name:n,config:r}=P(t,e);return new fi(n,r.withTimezone??!1,r.precision)}var gr,dr;class yi extends(dr=z,gr=i,dr){constructor(e,n,r){super(e,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(e){return new bi(e,this.config)}}s(yi,gr,"PgTimestampBuilder");var pr,fr;class bi extends(fr=c,pr=i,fr){constructor(n,r){super(n,r);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));s(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(bi,pr,"PgTimestamp");var hr,yr;class Si extends(yr=z,hr=i,yr){constructor(e,n,r){super(e,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(e){return new Ti(e,this.config)}}s(Si,hr,"PgTimestampStringBuilder");var br,Sr;class Ti extends(Sr=c,br=i,Sr){constructor(n,r){super(n,r);s(this,"withTimezone");s(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(Ti,br,"PgTimestampString");function v(t,e={}){const{name:n,config:r}=P(t,e);return(r==null?void 0:r.mode)==="string"?new Si(n,r.withTimezone??!1,r.precision):new yi(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var Tr,Nr;class Ni extends(Nr=m,Tr=i,Nr){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(O`gen_random_uuid()`)}build(e){return new Pi(e,this.config)}}s(Ni,Tr,"PgUUIDBuilder");var Pr,xr;class Pi extends(xr=c,Pr=i,xr){getSQLType(){return"uuid"}}s(Pi,Pr,"PgUUID");function Ba(t){return new Ni(t??"")}var wr,Ir;class xi extends(Ir=m,wr=i,Ir){constructor(e,n){super(e,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(e){return new wi(e,this.config)}}s(xi,wr,"PgVarcharBuilder");var Dr,Cr;class wi extends(Cr=c,Dr=i,Cr){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(wi,Dr,"PgVarchar");function I(t,e={}){const{name:n,config:r}=P(t,e);return new xi(n,r)}var Br,Fr;class Ii extends(Fr=m,Br=i,Fr){constructor(e,n){super(e,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(e){return new Di(e,this.config)}}s(Ii,Br,"PgBinaryVectorBuilder");var Vr,Ar;class Di extends(Ar=c,Vr=i,Ar){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Di,Vr,"PgBinaryVector");function Fa(t,e){const{name:n,config:r}=P(t,e);return new Ii(n,r)}var _r,zr;class Ci extends(zr=m,_r=i,zr){constructor(e,n){super(e,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(e){return new Bi(e,this.config)}}s(Ci,_r,"PgHalfVectorBuilder");var vr,jr;class Bi extends(jr=c,vr=i,jr){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}s(Bi,vr,"PgHalfVector");function Va(t,e){const{name:n,config:r}=P(t,e);return new Ci(n,r)}var Lr,Mr;class Fi extends(Mr=m,Lr=i,Mr){constructor(e,n){super(e,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(e){return new Vi(e,this.config)}}s(Fi,Lr,"PgSparseVectorBuilder");var qr,Qr;class Vi extends(Qr=c,qr=i,Qr){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Vi,qr,"PgSparseVector");function Aa(t,e){const{name:n,config:r}=P(t,e);return new Fi(n,r)}var Er,Ur;class Ai extends(Ur=m,Er=i,Ur){constructor(e,n){super(e,"array","PgVector"),this.config.dimensions=n.dimensions}build(e){return new _i(e,this.config)}}s(Ai,Er,"PgVectorBuilder");var $r,Or;class _i extends(Or=c,$r=i,Or){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}s(_i,$r,"PgVector");function _a(t,e){const{name:n,config:r}=P(t,e);return new Ai(n,r)}function za(){return{bigint:sa,bigserial:ia,boolean:aa,char:oa,cidr:ua,customType:la,date:ca,doublePrecision:ma,inet:ga,integer:da,interval:pa,json:fa,jsonb:ha,line:ya,macaddr:ba,macaddr8:Sa,numeric:Ta,point:Na,geometry:xa,real:wa,serial:_,smallint:Ia,smallserial:Da,text:re,time:Ca,timestamp:v,uuid:Ba,varchar:I,bit:Fa,halfvec:Va,sparsevec:Aa,vector:_a}}const ee=Symbol.for("drizzle:PgInlineForeignKeys"),me=Symbol.for("drizzle:EnableRLS");var Gr,Xr,Kr,Rr,Jr;class X extends(Jr=w,Rr=i,Kr=ee,Xr=me,Gr=w.Symbol.ExtraConfigBuilder,Jr){constructor(){super(...arguments);s(this,Kr,[]);s(this,Xr,!1);s(this,Gr)}}s(X,Rr,"PgTable"),s(X,"Symbol",Object.assign({},w.Symbol,{InlineForeignKeys:ee,EnableRLS:me}));function va(t,e,n,r,a=t){const o=new X(t,r,a),l=typeof e=="function"?e(za()):e,p=Object.fromEntries(Object.entries(l).map(([u,C])=>{const f=C;f.setName(u);const N=f.build(o);return o[ee].push(...f.buildForeignKeys(N,o)),[u,N]})),g=Object.fromEntries(Object.entries(l).map(([u,C])=>{const f=C;f.setName(u);const N=f.buildExtraConfigColumn(o);return[u,N]})),h=Object.assign(o,p);return h[w.Symbol.Columns]=p,h[w.Symbol.ExtraConfigColumns]=g,Object.assign(h,{enableRLS:()=>(h[X.Symbol.EnableRLS]=!0,h)})}const R=(t,e,n)=>va(t,e,n,void 0),y={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function b(t,e){return e.includes(t.columnType)}function ja(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const La=S.union([S.string(),S.number(),S.boolean(),S.null()]),Ma=S.union([La,S.record(S.any()),S.array(S.any())]),qa=S.custom(t=>t instanceof Buffer);function zi(t,e){const n=(e==null?void 0:e.zodInstance)??S,r=(e==null?void 0:e.coerce)??{};let a;return ja(t)&&(a=t.enumValues.length?n.enum(t.enumValues):n.string()),a||(b(t,["PgGeometry","PgPointTuple"])?a=n.tuple([n.number(),n.number()]):b(t,["PgGeometryObject","PgPointObject"])?a=n.object({x:n.number(),y:n.number()}):b(t,["PgHalfVector","PgVector"])?(a=n.array(n.number()),a=t.dimensions?a.length(t.dimensions):a):b(t,["PgLine"])?a=n.tuple([n.number(),n.number(),n.number()]):b(t,["PgLineABC"])?a=n.object({a:n.number(),b:n.number(),c:n.number()}):b(t,["PgArray"])?(a=n.array(zi(t.baseColumn,n)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=n.array(n.any()):t.dataType==="number"?a=Qa(t,n,r):t.dataType==="bigint"?a=Ea(t,n,r):t.dataType==="boolean"?a=r===!0||r.boolean?n.coerce.boolean():n.boolean():t.dataType==="date"?a=r===!0||r.date?n.coerce.date():n.date():t.dataType==="string"?a=Ua(t,n,r):t.dataType==="json"?a=Ma:t.dataType==="custom"?a=n.any():t.dataType==="buffer"&&(a=qa)),a||(a=n.any()),a}function Qa(t,e,n){let r=t.getSQLType().includes("unsigned"),a,o,l=!1;b(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=r?0:y.INT8_MIN,o=r?y.INT8_UNSIGNED_MAX:y.INT8_MAX,l=!0):b(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=r?0:y.INT16_MIN,o=r?y.INT16_UNSIGNED_MAX:y.INT16_MAX,l=!0):b(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=r?0:y.INT24_MIN,o=r?y.INT24_UNSIGNED_MAX:y.INT24_MAX,l=b(t,["MySqlMediumInt","SingleStoreMediumInt"])):b(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=r?0:y.INT32_MIN,o=r?y.INT32_UNSIGNED_MAX:y.INT32_MAX,l=!0):b(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=r?0:y.INT48_MIN,o=r?y.INT48_UNSIGNED_MAX:y.INT48_MAX):b(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||b(t,["MySqlSerial","SingleStoreSerial"]),a=r?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,l=!0):b(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,l=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let p=n===!0||n!=null&&n.number?e.coerce.number():e.number();return p=p.min(a).max(o),l?p.int():p}function Ea(t,e,n){const r=t.getSQLType().includes("unsigned"),a=r?0n:y.INT64_MIN,o=r?y.INT64_UNSIGNED_MAX:y.INT64_MAX;return(n===!0||n!=null&&n.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function Ua(t,e,n){if(b(t,["PgUUID"]))return e.string().uuid();let r,a,o=!1;b(t,["PgVarchar","SQLiteText"])?r=t.length:b(t,["MySqlVarChar","SingleStoreVarChar"])?r=t.length??y.INT16_UNSIGNED_MAX:b(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?r=y.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?r=y.INT24_UNSIGNED_MAX:t.textType==="text"?r=y.INT16_UNSIGNED_MAX:r=y.INT8_UNSIGNED_MAX),b(t,["PgChar","MySqlChar","SingleStoreChar"])&&(r=t.length,o=!0),b(t,["PgBinaryVector"])&&(a=/^[01]+$/,r=t.dimensions);let l=n===!0||n!=null&&n.string?e.coerce.string():e.string();return l=a?l.regex(a):l,r&&o?l.length(r):r?l.max(r):l}function vi(t){return rs(t)?na(t):ra(t)}function ji(t,e,n,r){const a={};for(const[o,l]of Object.entries(t)){if(!x(l,A)&&!x(l,T)&&!x(l,T.Aliased)&&typeof l=="object"){const C=rs(l)||ta(l)?vi(l):l;a[o]=ji(C,e[o]??{},n,r);continue}const p=e[o];if(p!==void 0&&typeof p!="function"){a[o]=p;continue}const g=x(l,A)?l:void 0,h=g?zi(g,r):S.any(),u=typeof p=="function"?p(h):h;n.never(g)||(a[o]=u,g&&(n.nullable(g)&&(a[o]=a[o].nullable()),n.optional(g)&&(a[o]=a[o].optional())))}return S.object(a)}const $a={never:t=>{var e,n;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((n=t==null?void 0:t.generatedIdentity)==null?void 0:n.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},J=(t,e)=>{const n=vi(t);return ji(n,{},$a)},Li=R("users",{id:_("id").primaryKey(),name:I("name",{length:100}).notNull(),email:I("email",{length:255}).notNull().unique(),phone:I("phone",{length:20}),googleId:I("google_id",{length:255}).unique(),gender:I("gender",{length:20}),age:I("age",{length:3}),createdAt:v("created_at").defaultNow()}),Oa=R("appointments",{id:_("id").primaryKey(),userId:_("user_id").references(()=>Li.id),serviceType:I("service_type",{length:100}).notNull(),appointmentDate:v("appointment_date").notNull(),staffId:I("staff_id",{length:100}),notes:re("notes"),status:I("status",{length:20}).notNull().default("pending"),createdAt:v("created_at").defaultNow()}),Ga=R("contact_messages",{id:_("id").primaryKey(),name:I("name",{length:100}).notNull(),email:I("email",{length:255}).notNull(),phone:I("phone",{length:20}).notNull(),message:re("message").notNull()}),Xa=R("newsletter_emails",{id:_("id").primaryKey(),email:I("email",{length:255}).notNull().unique(),createdAt:v("created_at").defaultNow()});J(Li).pick({name:!0,email:!0,phone:!0,gender:!0,age:!0}).extend({email:S.string().email("Geçerli bir e-posta adresi giriniz"),phone:S.string().min(10,"Telefon numarası en az 10 karakter olmalıdır")});J(Oa).pick({serviceType:!0,appointmentDate:!0,staffId:!0,notes:!0});const Ka=J(Ga).pick({name:!0,email:!0,phone:!0,message:!0}).extend({email:S.string().email("Geçerli bir e-posta adresi giriniz"),phone:S.string().min(10,"Telefon numarası en az 10 karakter olmalıdır"),message:S.string().min(10,"Mesaj en az 10 karakter olmalıdır")});J(Xa).pick({email:!0}).extend({email:S.string().email("Geçerli bir e-posta adresi giriniz")});function Ha(){const{toast:t}=Ei(),e=Ui({resolver:Xi(Ka),defaultValues:{name:"",email:"",phone:"",message:""}}),n=$i({mutationFn:r=>Ki("POST","/api/contact",r),onSuccess:()=>{t({title:"Message sent",description:"We'll get back to you soon!"}),e.reset()},onError:()=>{t({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}});return d.jsx("section",{className:"py-20 px-4",children:d.jsxs("div",{className:"max-w-3xl mx-auto",children:[d.jsx(se,{children:d.jsx("h2",{className:"text-4xl font-serif text-center mb-16",children:"Contact Us"})}),d.jsx(se,{delay:.2,children:d.jsx(Oi,{...e,children:d.jsxs("form",{onSubmit:e.handleSubmit(r=>n.mutate(r)),className:"space-y-6",children:[d.jsx(L,{control:e.control,name:"name",render:({field:r})=>d.jsxs(M,{children:[d.jsx(q,{children:"Name"}),d.jsx(Q,{children:d.jsx(W,{...r})}),d.jsx(E,{})]})}),d.jsx(L,{control:e.control,name:"email",render:({field:r})=>d.jsxs(M,{children:[d.jsx(q,{children:"Email"}),d.jsx(Q,{children:d.jsx(W,{type:"email",...r})}),d.jsx(E,{})]})}),d.jsx(L,{control:e.control,name:"phone",render:({field:r})=>d.jsxs(M,{children:[d.jsx(q,{children:"Phone"}),d.jsx(Q,{children:d.jsx(W,{type:"tel",...r})}),d.jsx(E,{})]})}),d.jsx(L,{control:e.control,name:"message",render:({field:r})=>d.jsxs(M,{children:[d.jsx(q,{children:"Message"}),d.jsx(Q,{children:d.jsx(Ri,{rows:5,...r})}),d.jsx(E,{})]})}),d.jsx(Gi,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?"Sending...":"Send Message"})]})})})]})})}export{Ha as C};
